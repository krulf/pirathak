#!/bin/bash

export gemtbesked=0
export pape=0

# SÃ¦t hjem
hjem=$(pwd)/pirathavn

hjÃ¦lp() {
    glow $hjem/.intro.md
}

start() {
    clear
    cd $hjem
    glow .intro.md
}

cd() {
    if [[ "$@" == *"piratskibet"* ]]; then
	if [[ $gemtbesked = 0 ]]; then
	        echo "Kaptajnen vil have du finder beskeden fÃ¸r du kommer ombord"
	elif [[ $gemtbesked = 1 ]] && [[ $pape = 0 ]]; then
		echo "Du mÃ¥ besejre den skelÃ¸jede papegÃ¸je"
	elif [[ $gemtbesked = 1 ]] && [[ $pape = 1 ]]; then
		builtin cd "$@"
	fi
    elif [[ $@ == "gemmested" ]] || [[ $@ == "gemmested/" ]]; then
        echo "Fedt du slap vÃ¦k..!"
    elif [[ -d pirathavn ]] && [[ $@ == "pirathavn" ]] || [[ $@ == "pirathavn/" ]]; then
	echo
	echo "Velkommen til pirathavnen, tjek omgivelserne med: cat pirathavn"
	echo
	builtin cd "$@"
    else
        builtin cd "$@"
    fi
}

echo() {
	if [[ "$@" == "Skattekortet er begravet pÃ¥ Ã¸en Isolering" ]]; then
		builtin echo "$@"
		builtin echo 
		builtin echo "Hoved 2: Arrrh nej, det var ikke Isolering, men Loddetin - skriv det pirataspirant!"
		builtin echo
	elif [[ "$@" == "Skatteko"* ]]; then
		builtin echo
		builtin echo "Hoved $((1 + $RANDOM % 3)): Aaaarh! PrÃ¸v igen!"
		builtin echo 
	elif [[ "$@" == "Skattekortet er begravet pÃ¥ Ã¸en Loddetin" ]]; then
		builtin echo
		builtin echo "Hoved 1: Fjumrehoveder! Det var da slet ikke en skat! Skriv i stedet: Skattekortet er blevet vÃ¦k"
		builtin echo
	elif [[ "$@" == "Skattekortet er blevet vÃ¦k" ]]; then
		builtin echo
		builtin echo -e "Du trÃ¦der lidt vÃ¦k, da abens tre hoveder begynder at rÃ¥be og skrige og bide efter hinanden.\n\nKort efter lÃ¸ber aben ud af dÃ¸ren."
		builtin echo
	else
		builtin echo "$@"
	fi
}

alias piratflag='echo "# SÃ¥dan matroser....\n\n###I har nu fuldfÃ¸rt denne opgaven og kan gÃ¥ videre. MÃ¥ vinden altid vÃ¦re i jeres sejl, og mÃ¥ skattejagterne aldrig ende!\n\nLykke og held! ğŸ´â€â˜ ï¸ğŸ’°" >> .nÃ¦ste_opgave.md | glow .nÃ¦ste_opgave.md'
