#!/bin/bash

export gemtbesked=0
export pape=0

# SÃ¦t hjem
hjem=$(pwd)/pirathavn

hjÃ¦lp() {
    glow $hjem/.intro.md
}

start() {
    clear
    cd $hjem
    glow .intro.md
}

cd() {
    if [[ "$@" == *"piratskibet"* ]]; then
	if [[ $gemtbesked = 0 ]]; then
		echo
	        echo "Kaptajnen vil have du finder beskeden fÃ¸r du kommer ombord"
		echo
	elif [[ $gemtbesked = 1 ]] && [[ $pape = 0 ]]; then
		echo
		echo "Du mÃ¥ besejre den skelÃ¸jede papegÃ¸je"
		echo
	elif [[ $gemtbesked = 1 ]] && [[ $pape = 1 ]] && [[ $abe = 0 ]]; then
		echo
		echo "Du skal snakke med den trehovedede abe pÃ¥ piratbaren"
		echo
	elif [[ $gemtbesked = 1 ]] && [[ $pape = 1 ]] && [[ $abe = 1 ]]; then
		export starttime=$(cat $hjem/.starttime)
		export endtime=$(date +%s)
		export duration=$(($endtime - $starttime))
		echo
		echo "Whoaa! Tillykke du er kommet ombord! Det tog dig $(date -d@$duration -u +%H:%M:%S)."
		echo 
		echo "Rejs dig op og sig AAAARH!"
		echo
		builtin cd "$@"
	fi
    elif [[ $@ == "gemmested" ]] || [[ $@ == "gemmested/" ]]; then
        echo "Fedt du slap vÃ¦k..!"
    elif [[ -d pirathavn ]] && [[ $@ == "pirathavn" ]] || [[ $@ == "pirathavn/" ]]; then
	echo $(date +%s)>$hjem/.starttime
	echo
	echo "Velkommen til pirathavnen, tjek omgivelserne med: cat pirathavn"
	echo
	builtin cd "$@"
    else
        builtin cd "$@"
    fi
}

echo() {
	if [[ "$@" == "Skattekortet er begravet pÃ¥ Ã¸en Isolering" ]]; then
		builtin echo "$@"
		builtin echo 
		builtin echo "Hoved 2: Arrrh nej, det var ikke Isolering, men Loddetin - skriv det pirataspirant!"
		builtin echo
	elif [[ "$@" == "Skattekortet er begravet pÃ¥ Ã¸en Loddetin" ]]; then
		builtin echo
		builtin echo "Hoved 1: Fjumrehoveder! Det var da slet ikke en skat! Skriv i stedet: Skattekortet er blevet vÃ¦k"
		builtin echo
	elif [[ "$@" == "Skattekortet er blevet vÃ¦k" ]]; then
		builtin echo
		builtin echo -e "Du trÃ¦der lidt vÃ¦k, da abens tre hoveder begynder at rÃ¥be og skrige og bide efter hinanden.\n\nKort efter lÃ¸ber aben ud af dÃ¸ren."
		builtin echo
		builtin echo -e "Du kan nu sÃ¦tte variablen abe til 1 med kommandoen:\n\nexport abe=1"
		builtin echo 
		builtin echo -e "# BoboCocoLoco\nLiget af den trehovedede abe ligger og det er et skrÃ¦mmende og foruroligende syn. Dens tre hoveder er kastet tilbage i en uhyggelig vrangstilling, med Ã¥bne munde, der stadig ser ud til at rÃ¥be og skÃ¦nde, selv i dÃ¸den. Ã˜jnene er udtvÃ¦ret i en skrÃ¦mmende grimasse af smerte, og den kolde havbrise fÃ¥r dens pels til at bÃ¸lge som spÃ¸gelsesagtige skygger.\n\nDe omkringliggende mÃ¥ger er tavse og er flygtet vÃ¦k. Stilheden er kun afbrudt af de dystre bÃ¸lgers sagte klukken. Det er som om, Ã¸stmolen selv bÃ¦rer ar fra den trehovedede abes gruopvÃ¦kkende dÃ¸d, og det sender en kuldegysning ned ad ryggen pÃ¥ enhver, der tÃ¸r nÃ¦rme sig.\n\n">$hjem/Ã¸stmolen/trehovedetabe.md
		rm trehovedetabe.md
	elif [[ "$@" == "Skatteko"* ]]; then
		builtin echo
		builtin echo "Hoved $((1 + $RANDOM % 3)): Aaaarh! PrÃ¸v igen!"
		builtin echo 
	else
		builtin echo "$@"
	fi
}

alias piratflag='echo "# SÃ¥dan matroser....\n\n###I har nu fuldfÃ¸rt denne opgave og kan gÃ¥ videre. MÃ¥ vinden altid vÃ¦re i jeres sejl, og mÃ¥ skattejagterne aldrig ende!\n\nLykke og held! ğŸ´â€â˜ ï¸ğŸ’°" | glow .nÃ¦ste_opgave.md'
